{%- comment -%}
  Get the variant and hardcode the phone number.
{%- endcomment -%}
{%- assign current_variant = product.selected_or_first_available_variant -%}
{%- assign sku = current_variant.sku -%}
{%- assign phone_number = '918980462440' -%}

<style>
  .sku-whatsapp-link {
    display: inline-block; /* Allows padding and text-align to work */
    text-align: center;
    padding: 10px;
    cursor: pointer;
    color: #333; /* Base text color */
    text-decoration: none; /* No underline by default */
    transition: color 0.2s ease; /* Smooth color change */
  }

  .sku-whatsapp-link:hover {
    color: #000; /* A little darker on hover */
    text-decoration: underline; /* Underline on hover */
  }
</style>

<variant-value-updater data-id="sku">

  {%- if phone_number != blank and sku != blank -%}

    {%- capture whatsapp_message -%}
    Hey, Iâ€™d like to inquire about this {{ sku }} Could you please share more details?
    {%- endcapture -%}

    {%- assign encoded_message = whatsapp_message | url_encode -%}


    {%- assign whatsapp_url = 'https://wa.me/' | append: phone_number | append: '?text=' | append: encoded_message -%}

    <a
      href="{{ whatsapp_url }}"
      class="sku-whatsapp-link"
      target="_blank"
      rel="noopener"
      aria-label="Inquire about SKU {{ sku }} on WhatsApp"
    >
      Know more about this product
    </a>

  {%- elsif sku != blank -%}
    {%- comment -%}
      If there is no phone number set, just show the SKU as plain text.
    {%- endcomment -%}
    <p>SKU: {{ sku }}</p>
  {%- endif -%}
</variant-value-updater>

{% schema %}
{
  "name": "SKU WhatsApp Link",
  "settings": [],
  "presets": [
    {
      "name": "SKU WhatsApp Link",
      "category": "t:categories.custom"
    }
  ]
}
{% endschema %}
